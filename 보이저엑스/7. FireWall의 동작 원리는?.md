

```

1) 패킷 필터링형이 주류이다

- 서버의 설치 장소와 관계 없이 지금은 바로 앞에 방화벽이 있는 것이 보통입니다.
  그래서 패킷이 방화벽을 통과하는 곳부터 서버측의 탐험 여행을 시작하기로 합니다.

- 방화벽의 기본이 되는 개념은 앞에서 설명했듯이 특정 서버와 해당 서버 안의 특정 애플리케이션에 액세스하는 패킷만 통과시키고,
  그 외의 패킷을 차단합니다.
  그러나 특정 서버나 특정 애플리케이션의 패킷만 통과시킨다고 간단히 말했지만,
  네트워크에는 다양한 종류의 패킷이 많이 흐릅니다.
  그러므로 이 중에서 통과시킬 패킷과 차단할 패킷을 선별하는 것은 간단한 일이 아니기 때문에
  지금까지 다양한 방법이 고안되었습니다.

- 어느 방법으로도 방화벽의 목적을 수행할 수 있지만, 성능, 가격, 사용 편의성 등의 이유로
  지금은 패킷 필터링형이 가장 만힝 보급되었습니다.
  그래서 이 탐험은 패킷 필터링형에 초점을 맞춰 탐색해 보겠습니다.


2) 패킷 필터링의 조건 설정 개념

- 패킷의 헤더에는 통신 동작을 제어하는 제어 정보가 들어 있으므로, 이것을 조사하면 여러 가지 사항을 알 수 있습니다.
  그 중에서서도 [표5-1]에 정리한 항목은 패킷 필터링의 조건 설정에서 자주 사용하는 것입니다.
  하지만 이 표의 설명만으로는 차단하는 조건을 이해하기 어려우므로, 구체적인 예를 들어 설명하겠습니다.

- [그림 5-2]와 같이 공개용 서버를 설치하는 LAN과 사내 LAN이 분리되어 있고,
  웹 서버는 공개 서버용 LAN에 접속되어 있다고 가정합니다.
  그리고 인터넷에서 웹 서버에 대한 액세스를 허가하지 않으면 웹 서버에서 인터넷의 액세스를 금지하도록 패킷을 차단합니다.

- 이전에는 웹 서버에서 인터넷측에 대한 액세스를 금지하는 예가 적었습니다.
  하지만 지금은 서버에 기생하며 여기에서 다른 서버에 감염되어 가는 부정 소프트웨어가 있으므로,
  감염을 막기 위해 웹 서버에서 인터넷측에 액세스하는 것을 금지하고 있습니다.
-> 이러한 상황에서 패킷 필터링의 조건을 어떻게 설정할까요? 이것을 예로 하여 패킷 필터링의 개념을 설명하겠습니다.

- 패킷 필터링의 조건을 설정할 때는 먼저 패킷의 흐름을 착안합니다.
  그리고 수신처 ip 주소와 송신처 ip 주소에 따라 시점과 종점을 판단합니다.
  [그림 5-2]의 1)의 예라면 인터넷에서 웹 서버를 향해 패킷이 흐릅니다.
  인터넷에서 보내오는 패킷은 시점을 지정할 수 없지만, 흐름의 종점은 웹 서버가 되므로 이것을 조건으로 설정하고
  조건에 해당하는 패킷만 통과시킵니다.
  즉, 시점(송신처 ip 주소)은 어디라도 상관없으므로, 종점(수신처 IP 주소)이 웹 서버의 ip 주소에 일치하는 패킷은 통과시킨다는 조건을 선정하면 됩니다.
  [그림 5-2]의 1행. 송신처 ip 주소에 따라 시점을 지정할 수 있으면, 이것도 조건에 추가합니다.
  이 예와 같이 시점을 지정할 수 없는 경우에는 송신처 ip 주소를 조건으로 지정하지 않아도 상관없습니다.
  
- 이렇게 해서 인터넷측에서 웹 서버로 흘러가는 패킷은 방화벽을 통과하지만, 이것만으로는 액세스 동작이 제대로 작동하지 않습니다.
  패킷을 받으면 정확하게 도착했는지를 송신측에 알리는 수신 확인 응답의 구조가 작용하므로,
  웹 서버에서 인터넷측으로 흐르는 패킷도 있기 때문입니다.
  웹 서버에서 클라이언트에 보내는 데이터가 있고, 이 패킷도 웹 서버에서 인터넷측으로 흘러간 후 그곳에서 시점(송신처 ip 주소)이
  웹 서버의 주소에 일치하는 패킷도 통과합니다.
  이와 같이 수신처나 송신처의 주소에 따라 패킷이 어디서, 어디로 흘러가는지를 판단하여 통과시킬 것인지, 차단할 것인지 결정하는 것이 첫걸음입니다.


3) 애플리케이션을 한정할 때 포트 번호를 사용한다

- 이것뿐이라면 인터넷과 웹 서버 사이를 흐르는 패킷은 전부 통과해서 위험한 상태가 됩니다.
  예를 들어, 서버 머신에서 파일 서버 기능이 유효하므로 네트워크를 경유하여 파일에 부정으로 액세스할 경우
  정보가 누설될지도 모릅니다.
  위험성이 있는 것은 파일 서버만이 아닙니다. 매일같이, 해가 거듭할수록 보안 구멍이 발견되는 상황이므로
  어디에 어떤 위험성이 잠재하는지 모릅니다.
  그러므로 불필요한 것, 이 예에서는 웹 이외의 애플리케이션의 패킷을 전부 차단하는 쪽이 좋습니다.
  
- 이와 같이 애플리케이션을 한정할 때는 tcp 헤더나 UDP 헤더에 기록되어 있는 포트 번호를 조건으로 추가합니다.
  웹 서버의 포트 번호는 80번으로 결정되어 있으므로, 전술한 수신처 ip 주소 및 송신처 ip 주소에 수신처 포트 번호가 80번인 경우에 대한 조건도 추가합니다.
  즉, 수신처 ip 주소가 웹 서버의 주소와 일치하고, 수신처 포트 번호가 80번앤 패킷은 통과합니다.
  또한, 송신처 ip 주소가 웹 서버의 주소와 일치하고 송신처 포트 번호가 80번인 패킷도 통과하도록 설정합니다.
  그리고 웹 서버 이외의 애플리케이션에 대한 액세스를 허가할 경우에는 이 애플리케이션의 포트 번호를 설정하여 이것이 통과하도록 합니다.

   

```
